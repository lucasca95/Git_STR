     1: #include <htc.h>
     2: 
     3: #define _XTAL_FREQ 1000000
     4: 
     5: void interrupt handler(void);
     6: unsigned char toggleLeds = 0;
     7: int main()
     8: {
     9:     T0IE = 0;
    10:     GIE = 0;
    11: 
    12:     //config pines
    13:     TRISA = 0b00000011;
    14:     TRISB = 0b00000000;
    15:     //leds comienzan encendidos
    16:     RB4 = 1;
    17:     RB5 = 1;
    18: 
    19:     //config timer
    20:     T0CS = 0;
    21:     T0SE = 1;
    22:     PSA = 0;
    23:     PS2 = 1;
    24:     PS1 = 1;
    25:     PS0 = 1; //prescalador en 256
    26: 
    27:     while ((RA0) && (RA1))
    28:     {
    29:         //esperar
    30:     }
    31:     //habilitar interrupciones
    32:     GIE = 1;
    33:     T0IE = 1;
    34: 
    35:     for (;;)
    36:     {
    37:         if (toggleLeds)
    38:         {
    39:             toggleLeds=0;
    40:             RB4 = !RB4;
    41:             RB5 = !RB5;
    42:         }
    43:     }
    44: 
    45:     return 0;
    46: }
    47: 
    48: void interrupt handler()
    49: {
    50:     GIE=0;
    51:     T0IE=0;
    52:     toggleLeds = 1;
    53:     T0IF = 0;
    54:     T0IE=1;
    55:     GIE=1;
    56: }